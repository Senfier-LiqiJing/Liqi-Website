// ============================================================================
// CARD MICRO-INTERACTIONS
// Enhanced hover effects with 3D lift and soft shadows
// ============================================================================

// Variables for customization
$card-lift-distance: -8px;
$card-scale: 1.02;
$card-transition-duration: 0.3s;
$card-transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
$card-shadow-color: rgba(0, 0, 0, 0.1);
$card-highlight-color: rgb(59, 130, 246);
$card-highlight-color-dark: rgb(96, 165, 250);

// Mixins
@mixin card-base-shadow {
    box-shadow:
        0 1px 3px 0 rgba(0, 0, 0, 0.1),
        0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

@mixin card-hover-shadow {
    box-shadow:
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04),
        0 0 0 1px rgba(59, 130, 246, 0.1),
        0 0 40px -10px rgba(59, 130, 246, 0.2);
}

@mixin card-hover-shadow-dark {
    box-shadow:
        0 20px 25px -5px rgba(0, 0, 0, 0.4),
        0 10px 10px -5px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(96, 165, 250, 0.2),
        0 0 40px -10px rgba(96, 165, 250, 0.3);
}

@mixin smooth-transition($properties...) {
    transition: $properties $card-transition-duration $card-transition-timing;
}

// Base card styles
.group[role="article"],
article.group,
.card,
[class*="card-"] {
    // Smooth transition for all properties
    @include smooth-transition(all);

    // Initial state - subtle shadow
    @include card-base-shadow;

    // Prepare for transform
    transform: translateY(0) scale(1);

    // Better rendering
    will-change: transform, box-shadow;
    backface-visibility: hidden;
    -webkit-font-smoothing: subpixel-antialiased;

    // Use GPU acceleration
    transform: translateZ(0);
    -webkit-transform: translateZ(0);

    // Hover state
    &:hover {
        // Lift the card upward
        transform: translateY($card-lift-distance) scale($card-scale);

        // Multi-layer soft shadow for depth
        @include card-hover-shadow;

        // Image zoom effect
        img {
            transform: scale(1.05);
            transition: transform 0.5s $card-transition-timing;
        }

        // Title color shift
        h3,
        .card-title {
            color: $card-highlight-color;
            transition: color 0.2s ease-out;
        }
    }

    // Active/pressed state
    &:active {
        transform: translateY(-4px) scale(1.01);
        transition: all 0.1s $card-transition-timing;
    }

    // Focus state for accessibility
    &:focus-within {
        outline: 2px solid $card-highlight-color;
        outline-offset: 2px;
        transform: translateY(-6px) scale(1.015);
    }
}

// Dark mode adjustments
@media (prefers-color-scheme: dark) {
    .group[role="article"],
    article.group,
    .card,
    [class*="card-"] {
        &:hover {
            @include card-hover-shadow-dark;
        }
    }
}

// Dark mode (class-based)
.dark {
    .group[role="article"],
    article.group,
    .card,
    [class*="card-"] {
        &:hover {
            @include card-hover-shadow-dark;

            h3,
            .card-title {
                color: $card-highlight-color-dark;
            }
        }
    }
}

// ============================================================================
// CARD VARIATIONS
// Optional enhanced effects for specific card types
// ============================================================================

// Subtle card - less aggressive hover
.card-subtle {
    &:hover {
        transform: translateY(-4px) scale(1.01);
        box-shadow:
            0 10px 15px -3px rgba(0, 0, 0, 0.1),
            0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
}

// Bold card - more dramatic hover
.card-bold {
    &:hover {
        transform: translateY(-12px) scale(1.03);
        box-shadow:
            0 25px 50px -12px rgba(0, 0, 0, 0.25),
            0 0 60px -15px rgba(59, 130, 246, 0.3);
    }
}

// Tilt effect on hover
.card-tilt {
    transition: all $card-transition-duration $card-transition-timing;

    &:hover {
        transform: translateY(-8px) rotateX(2deg) rotateY(-2deg);
        transform-style: preserve-3d;
    }
}

// Glow effect on hover
.card-glow {
    &:hover {
        box-shadow:
            0 20px 25px -5px rgba(0, 0, 0, 0.1),
            0 10px 10px -5px rgba(0, 0, 0, 0.04),
            0 0 60px rgba(59, 130, 246, 0.4);
    }
}

// ============================================================================
// ACCESSIBILITY & PERFORMANCE
// ============================================================================

// Reduce motion for users who prefer it
@media (prefers-reduced-motion: reduce) {
    .group[role="article"],
    article.group,
    .card,
    [class*="card-"] {
        &,
        &:hover {
            transform: none;
            transition: box-shadow 0.2s ease;
        }

        &:hover img {
            transform: none;
        }
    }
}
